#:kivy 1.0.9
#:import Gradient Lockonia.Gradient
#:import ScreenManager kivy.uix.screenmanager
#:import blue __main__.blue
#:import white __main__.white
#:import grey1 __main__.grey1
#:import grey2 __main__.grey2
#:import grey3 __main__.grey3
#:import text_color __main__.text_color
<BaseWindow>:
    canvas:
        Color:
            rgba: grey3
        Rectangle:
            pos: self.pos
            size: self.size

        Color:
            rgba: blue
        Rectangle:
            size: self.width, self.height/5
            pos: 0, 4*self.height/5

        Color:
            rgba: white
        Rectangle:
            pos: 0,  4*self.height/5
            size: self.width, 5
            texture: Gradient.vertical(grey3, grey1)


<StartScreen>:
    name: "start"
    on_enter: self.focus_card_reader(card_reader)

    canvas:
        Color:
            rgba: grey3
        Rectangle:
            pos: self.pos
            size: self.size

        Color:
            rgba: blue
        Rectangle:
            size: self.width/3, self.height

        Color:
            rgba: white
        Rectangle:
            pos: self.width/3 - 1, 0
            size: 5, self.height
            texture: Gradient.horizontal(grey1, grey3)

    Label:
        markup: True
        font_size: 35
        center_x: 2*self.width/3
        text: "[font=Lao]Tap card to begin[/font]"
        color: text_color

    CardReader:
        # out of sight, out of mind
        center_x: 10000
        top: 10000
        id: card_reader
        focus:True
        multiline:False
        on_text_validate: self.on_card_tap(card_reader)
        unfocus_on_touch: False


<HomeScreen>:
    name: "welcome"

    BaseWindow:
        Label:
            font_size: 50
            text:"Welcome"
            color:text_color

            BoxLayout:
                pos: (root.width - self.width)/2, 0
                size: root.width/2, root.height / 4

                orientation:"horizontal"
                Button:
                    text:"Checkout"
                    on_press:root.goto_checkout()
                    background_color: blue
                Button
                    text:"Checkin"
                    on_press:root.goto_checkin()
                    background_color: blue


<InvalidUserScreen>:
    name: "invalid_user"

    BaseWindow:
        Label:
            font_size: 30
            text:"lmao dude go gechu some admin boi"
            color: text_color


<CheckinScreen>:

    name: "checkin"

    BaseWindow:
        Label:
            font_size: 50
            text:"You're checking a thing in"
            color: text_color

            BoxLayout:
                pos: 0, 0
                size: root.width, root.height / 4

                orientation:"horizontal"
                Button:
                    text:"Camera 1"
                    on_press:root.checkin(1)
                    background_color: blue
                Button:
                    text:"Camera 2"
                    on_press:root.checkin(2)
                    background_color: blue
                Button:
                    text:"Camera 3"
                    on_press:root.checkin(3)
                    background_color: blue
                Button:
                    text:"Camera 4"
                    on_press:root.checkin(4)
                    background_color: blue


<CheckoutScreen>:
    name: "checkout"
    BaseWindow:
        Label:
            font_size: 50
            text:"You're checking a thing out"
            color: text_color

            BoxLayout:
                pos: 0, 0
                size: root.width, root.height / 4

                orientation:"horizontal"
                Button:
                    text:"Camera 1"
                    on_press:root.checkout(1)
                    background_color: blue
                Button:
                    text:"Camera 2"
                    on_press:root.checkout(2)
                    background_color: blue
                Button:
                    text:"Camera 3"
                    on_press:root.checkout(3)
                    background_color: blue
                Button:
                    text:"Camera 4"
                    on_press:root.checkout(4)
                    background_color: blue


<ConfirmationScreen>:
    name: "confirmation"

    BaseWindow:
        Label:
            font_size: 50
            text:"You did a thing!"
            color: text_color
